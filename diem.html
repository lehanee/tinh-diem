<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>T√≠nh ƒëi·ªÉm ch∆°i b√†i</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: -apple-system, sans-serif;
    background: #f2f2f7;
    margin: 0;
    padding: 15px;
}
.container {
    max-width: 500px;
    margin: auto;
}
.card {
    background: white;
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 15px;
}
h1 {
    text-align: center;
}
input, select, button {
    width: 100%;
    padding: 12px;
    margin-top: 6px;
    margin-bottom: 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 16px;
}
button {
    background: #e53935;
    color: white;
    border: none;
    font-weight: bold;
}
.player-box {
    background: #fafafa;
    padding: 10px;
    border-radius: 10px;
    margin-bottom: 10px;
}
table {
    width: 100%;
    border-collapse: collapse;
}
th, td {
    padding: 10px;
    border: 1px solid #ddd;
    text-align: center;
}
th {
    background: #e53935;
    color: white;
}
</style>
</head>

<body>
<div class="container">
    <h1>üßß T√≠nh ƒëi·ªÉm</h1>

    <!-- B∆∞·ªõc 1 -->
    <div class="card" id="setup">
        <h3>B∆∞·ªõc 1: Nh·∫≠p ng∆∞·ªùi ch∆°i</h3>
        <label>S·ªë ng∆∞·ªùi ch∆°i</label>
        <select id="playerCount">
            <option value="2">2</option>
            <option value="3" selected>3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>

        <div id="nameInputs"></div>

        <button onclick="startGame()">B·∫Øt ƒë·∫ßu ch∆°i</button>
    </div>

    <!-- B∆∞·ªõc 2 -->
    <div class="card" id="game" style="display:none;">
        <h3>Nh·∫≠p k·∫øt qu·∫£ v√≤ng</h3>
        <div id="roundInputs"></div>
        <button onclick="addRound()">T√≠nh ƒëi·ªÉm v√≤ng</button>
    </div>

    <!-- B·∫£ng ƒëi·ªÉm -->
    <div class="card" id="scoreCard" style="display:none;">
        <h3>T·ªïng ƒëi·ªÉm</h3>
        <table id="scoreTable">
            <thead>
                <tr>
                    <th>Ng∆∞·ªùi ch∆°i</th>
                    <th>ƒêi·ªÉm</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script>
let players = [];
let scores = [];

function renderNameInputs() {
    const count = parseInt(document.getElementById("playerCount").value);
    const container = document.getElementById("nameInputs");
    container.innerHTML = "";

    for (let i = 0; i < count; i++) {
        container.innerHTML += `
            <input id="name${i}" placeholder="T√™n ng∆∞·ªùi ${i+1}">
        `;
    }
}

document.getElementById("playerCount").onchange = renderNameInputs;
renderNameInputs();

function startGame() {
    const count = parseInt(document.getElementById("playerCount").value);
    players = [];
    scores = [];

    for (let i = 0; i < count; i++) {
        let name = document.getElementById("name" + i).value || "P" + (i+1);
        players.push(name);
        scores.push(0);
    }

    document.getElementById("setup").style.display = "none";
    document.getElementById("game").style.display = "block";
    document.getElementById("scoreCard").style.display = "block";

    renderRoundInputs();
    updateScoreTable();
}

function renderRoundInputs() {
    const container = document.getElementById("roundInputs");
    container.innerHTML = "";

    players.forEach((name, i) => {
        container.innerHTML += `
            <div class="player-box">
                <strong>${name}</strong>
                <input type="number" id="cards${i}" placeholder="S·ªë l√° c√≤n l·∫°i">
                <label>
                    <input type="radio" name="winner" value="${i}">
                    Ng∆∞·ªùi th·∫Øng
                </label>
            </div>
        `;
    });
}

function addRound() {
    let winner = document.querySelector('input[name="winner"]:checked');
    if (!winner) {
        alert("Ch·ªçn ng∆∞·ªùi th·∫Øng");
        return;
    }

    winner = parseInt(winner.value);
    let total = 0;
    let cards = [];

    for (let i = 0; i < players.length; i++) {
        let c = parseInt(document.getElementById("cards" + i).value) || 0;
        cards.push(c);
        if (i !== winner) total += c;
    }

    for (let i = 0; i < players.length; i++) {
        if (i === winner) scores[i] += total;
        else scores[i] -= cards[i];
    }

    renderRoundInputs();
    updateScoreTable();
}

function updateScoreTable() {
    const tbody = document.querySelector("#scoreTable tbody");
    tbody.innerHTML = "";

    players.forEach((name, i) => {
        tbody.innerHTML += `
            <tr>
                <td>${name}</td>
                <td>${scores[i]}</td>
            </tr>
        `;
    });
}
</script>
</body>
</html>